<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html" lang="pt-BR"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
	<title>Manager Companies</title>
	<h:outputStylesheet library="templates" name="login.css" />
	<h:outputStylesheet library="webjars"
		name="font-awesome/5.15.4/css/all.min-jsf.css" />

</h:head>
<h:body>
	<div class="content">
		<div class="content-info">
			<h1>Company Manager</h1>
			<h4>Company Manager é uma aplicação web que permite gerenciar
				empresas com cadastro simplificado.</h4>
		</div>
		<div class="content-login">
			<h:form id="frm" class="content-login-box">
				<p:inputText class="inputs" placeholder="Email"
					value="#{userBean.user.email}" />
				<p:password class="inputs" placeholder="Senha"
					value="#{userBean.user.password}" />
				<p:commandButton value="Entrar" styleClass="btn btn-enter"
					action="#{userBean.login()}" process="frm" update="frm" />

				<h:panelGroup layout="block">
					<p:commandLink value="Esqueceu a senha?"
						styleClass="forgot-password" />
				</h:panelGroup>

				<hr />

				<p:commandButton value="Criar Nova Conta"
					actionListener="#{userBean.prepareNewUser}"
					oncomplete="PF('userDialogWidgetVar').show()"
					styleClass="ui-button-success" update="userDialog" process="@this">
					<p:resetInput target="userDialog" />
				</p:commandButton>

				<p:dialog id="userDialog" header="Cadastre-se"
					widgetVar="userDialogWidgetVar" resizable="false" modal="true"
					closable="true" styleClass="content-login-box">
					<p:messages id="userMessages" showDetail="true" />

					<div class="form-group">
						<div class="input-group">
							<p:inputText id="firstName" placeholder="Nome"
								value="#{userBean.user.firstName}" required="true"
								styleClass="inputs" />
							<p:inputText id="lastName" placeholder="Sobrenome"
								value="#{userBean.user.lastName}" required="true"
								styleClass="inputs" />
						</div>
					</div>

					<div class="form-group">
						<p:inputText id="email" placeholder="Email"
							value="#{userBean.user.email}" required="true"
							styleClass="inputs" />
					</div>

					<div class="form-group">
						<p:password id="password" placeholder="Senha"
							value="#{userBean.user.password}" required="true"
							styleClass="inputs" feedback="true" minLength="8" maxLength="30"
							match="confirmPassword"
							validatorMessage="A senha deve conter no mínimo 8 caracteres, incluindo letras maiúsculas, letras minúsculas, números e caracteres especiais."
							converter="javax.faces.LongRunningConverter" />
					</div>

					<div class="form-group">
						<p:calendar id="birthDate" placeholder="Data de Nascimento"
							value="#{userBean.user.birthDate}" pattern="dd/MM/yyyy"
							required="true" navigator="true" yearRange="1905:2024"
							minDate="01/01/1905"
							maxDate="#{T(java.time.LocalDate).now().format(java.time.format.DateTimeFormatter.ofPattern('dd/MM/yyyy'))}"
							styleClass="inputs" />
					</div>

					<div class="form-group">
						<p:commandButton id="saveCommandButton" value="Cadastrar"
							actionListener="#{userBean.save}"
							update="userDialog userMessages"
							oncomplete="if (!args.validationFailed) PF('userDialogWidgetVar').show();"
							process="userDialog" styleClass="btn btn-enter"
							resetValues="true" />
					</div>
				</p:dialog>
			</h:form>
		</div>
	</div>
	<footer class="footer">
		<p>
			Feito com <span class="heart">❤</span> por <a
				href="https://github.com/lasbrDev" target="_blank">✝ lasbrDev ✝</a>
		</p>
	</footer>
</h:body>
</html>